{% extends "./base.html" %}
{% block content %}
    <h2>Home</h2>
    <div class="my-requests">
        <h3>My requests</h3>
        <table>
            <colgroup span="3"></colgroup>
            <tr>
                <th>Course section</th>
                <th>Requested by</th>
                <th>Date requested</th>
            </tr>
            {% for request in requests %}
                <tr>
                    <td>
                        <a href="{% url "request_detail" request.section.section_code %}">{{ request.section.get_canvas_course_code }}</a>
                    </td>
                    <td>
                        {% if not request.proxy_requester %}
                            You
                        {% elif user == request.requester %}
                            You on behalf of {{ request.proxy_requester }}
                        {% else %}
                            {{ request.requester }} on your behalf
                        {% endif %}
                    </td>
                    <td>{{ request.created_at }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
    <div class="my-courses">
        <h3>My current ({{ current_term }}) and upcoming ({{ next_term }}) courses</h3>
        {% if sections %}
            {% for section in sections %}
                <p>
                    <a href="{% if section.request %} {% url "request_detail" section.section_code %} {% else %} {% url "section_request" section.section_code %} {% endif %}">
                        {{ section.get_canvas_course_code }}
                    </a>
                </p>
            {% endfor %}
        {% else %}
            <p>
                You are not listed as an instructor for any current or upcoming
                courses. To request a course on behalf of someone else, please
                check the list of <a href="{% url "sections" %}">available
            courses</a>.
        </p>
    {% endif %}
</div>
<div class="my-canvas-sites">
    <h3>My Canvas sites</h3>
    {% for site in canvas_sites %}
        <p>
            <a href="{{ canvas_url }}/{{ site.id }}"
               target="_blank"
               rel="noopener noreferrer">{{ site }}</a>
        </p>
    {% endfor %}
</div>
{% endblock content %}
