<table>
    <tr>
        <th>Section code</th>
        <th>Title</th>
        <th>Schedule Type</th>
        <th>Instructors</th>
        {% if status != "unrequested" %}
            <th>Requested by</th>
            <th>Date requested</th>
        {% endif %}
    </tr>
    {% for section in object_list %}
        {% with request=section.request %}
            <tr class="{% if request and not status == "requested" %}row-disabled{% endif %}">
                <td>
                    <a href="{% if section.request %}{% url "request_detail" section.section_code %}{% else %}{% url "section_request" section.section_code %}{% endif %}">
                        {{ section.get_canvas_course_code }}
                    </a>
                </td>
                <td>{{ section.title }}</td>
                <td>{{ section.schedule_type.sched_type_code }}</td>
                <td class="instructors">{{ section.get_instructors_list }}</td>
                {% if status != "unrequested" %}
                    <td>
                        {% if request %}
                            {% if user == request.requester %}
                                You
                            {% else %}
                                {{ request.requester }}
                            {% endif %}
                            {% with proxy_requester=request.proxy_requester %}
                                {% if proxy_requester %}on behalf of {{ proxy_requester }}{% endif %}
                            {% endwith %}
                        {% else %}
                            ---
                        {% endif %}
                    </td>
                    <td>
                        {% if request %}
                            {{ request.created_at }}
                        {% else %}
                            ---
                        {% endif %}
                    </td>
                {% endif %}
            </tr>
        {% endwith %}
    {% endfor %}
</table>
